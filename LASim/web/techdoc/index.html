<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-99.9.9">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2024-05-20">

<title>SLAB Legal Aid Model Documentation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>


<link rel="stylesheet" href="../css/slab-bootstrap.css">
</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#the-model" id="toc-the-model" class="nav-link" data-scroll-target="#the-model">The Model</a>
  <ul class="collapse">
  <li><a href="#code-organisation" id="toc-code-organisation" class="nav-link" data-scroll-target="#code-organisation">Code organisation</a></li>
  <li><a href="#taxes-and-benefits" id="toc-taxes-and-benefits" class="nav-link" data-scroll-target="#taxes-and-benefits">Taxes and Benefits</a></li>
  <li><a href="#calibration" id="toc-calibration" class="nav-link" data-scroll-target="#calibration">Calibration</a></li>
  <li><a href="#testing" id="toc-testing" class="nav-link" data-scroll-target="#testing">Testing</a></li>
  <li><a href="#web-interface" id="toc-web-interface" class="nav-link" data-scroll-target="#web-interface">Web Interface</a></li>
  <li><a href="#frs-data" id="toc-frs-data" class="nav-link" data-scroll-target="#frs-data">FRS Data</a></li>
  <li><a href="#matching" id="toc-matching" class="nav-link" data-scroll-target="#matching">Matching</a></li>
  <li><a href="#scottish-crime-and-justice-survey-scjs" id="toc-scottish-crime-and-justice-survey-scjs" class="nav-link" data-scroll-target="#scottish-crime-and-justice-survey-scjs">Scottish Crime and Justice Survey (SCJS)</a></li>
  <li><a href="#slab-datasets" id="toc-slab-datasets" class="nav-link" data-scroll-target="#slab-datasets">SLAB Datasets</a></li>
  <li><a href="#updating-and-maintenance" id="toc-updating-and-maintenance" class="nav-link" data-scroll-target="#updating-and-maintenance">Updating and Maintenance</a></li>
  <li><a href="#todods" id="toc-todods" class="nav-link" data-scroll-target="#todods">TODODs</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="index.docx"><i class="bi bi-file-word"></i>MS Word</a></li></ul></div></nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">SLAB Legal Aid Model Documentation</h1>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Graham Stark <a href="mailto:graham.stark@virtual-worlds.scot" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Virtual Worlds Research
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">May 20, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>These are technical notes for the for the Scottish Legal Aid Board eligibility simulator model.</p>
<p>For an overview of the purpose and desired specifications of the model, please refer to the SLAB bid document and the Virtual Worlds tender document. For an overview of the legal aid system itself, see [???] Broadly, purpose of the model is to estimate the entitlement to both Civil and Advice and Assistance (AA) legal aid amongst the Scottish Population under the current and various hypothetical systems, and from that estimate the likely costs or savings of changes to eligibility rules.</p>
<p>The LASim model that was built do do this built on earlier work for the England And Wales Legal Aid Board [<span class="citation" data-cites="buck_means_2001">Buck and Stark<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></span>;<span class="citation" data-cites="buck_simplicity_2003">Buck and Stark<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></span>;] and the Scottish and Northern Irish Legal Aid Boards.<span class="citation" data-cites="digan_financial_2007 StarkSLAB"><a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></span></p>
</section>
<section id="the-model" class="level2">
<h2 class="anchored" data-anchor-id="the-model">The Model</h2>
<section id="code-organisation" class="level3">
<h3 class="anchored" data-anchor-id="code-organisation">Code organisation</h3>
<p>LASim builds on <a href="https://github.com/grahamstark/ScottishTaxBenefitModel.jl/">Scotben</a>, a microsimulation tax-benefit model of Scotland. Scotben is a conventional static microsimulation model, built using the <a href="https://juliahub.org">Julia</a> programming language and Family Resources Survey (FRS) [] data.</p>
<p>A tax benefit model is [..]. For more information on this model, see [] and for tax-benefit models generally, see [].</p>
<p>All the code used in this project is available for inspection on the GitHub code sharing site, as follows:</p>
<ul>
<li><a href="https://github.com/grahamstark/scottishtaxbenefitmodel.jl">Scotben - the Main Model</a></li>
<li><a href="https://github.com/grahamstark/lainterfaces/">LASim - the web Front End</a></li>
</ul>
<p>Julia code is organised into <code>modules</code> [] which are aggregated into packages []. Packages can be downloaded and either run directly or integrated into other programs. ScotBen is a Julia package. For this project, several modules were added to the Scotben package:</p>
<ul>
<li><a href="https://github.com/grahamstark/ScottishTaxBenefitModel.jl/blob/master/src/LegalAidCalculations.jl">LegalAidCalculations.jl</a> - this calculates entitlement to both Civil and AA for a single FRS household.<br>
</li>
<li><a href="https://github.com/grahamstark/ScottishTaxBenefitModel.jl/blob/master/src/LegalAidOutput.jl">LegalAidOutput.jl</a> - this generates output tables and calculates the likelyhood that a given household will claim legal aid.</li>
<li><a href="https://github.com/grahamstark/ScottishTaxBenefitModel.jl/blob/master/src/LegalAidData.jl">LegalAidData.jl</a> - this holds SLAB supplied individual-level records for payments and contributions under both Civil and AA legal aid. This is used along with tbe entitlement data to produce cost and takeup estimates.</li>
</ul>
<p>in addition, additions were made to the following Modules:</p>
<ul>
<li><a href="https://github.com/grahamstark/ScottishTaxBenefitModel.jl/blob/master/src/STBParameters.jl">STBParameters.jl</a> - this models the parameters needed for the entire Scottisg/UK fiscal system - tax rates, benefit levels and so on. A set of parameters capturing capital and income limits, rules for allowances, disregarded incomes, etc. was added</li>
<li><a href="https://github.com/grahamstark/ScottishTaxBenefitModel.jl/blob/master/src/Results.jl">Results.jl</a> - This holds records capturing entitlements to benefits, liability to tax, etc. for a single household. A record capturing entitlement to Legal Aid, contributions, assessed income, etc. was added, as <code>OneLegalAidResult</code>.</li>
<li><a href="https://github.com/grahamstark/ScottishTaxBenefitModel.jl/blob/master/src/SingleHouseholdCalculations.jl">SingleHouseholdCalculations.jl</a> - this runs all calculations for all FRS households. A small call was added to optionally run the legal aid calculations;</li>
<li><a href="https://github.com/grahamstark/ScottishTaxBenefitModel.jl/blob/master/src/STBOutput.jl">STBOutput</a> - this holds the main output from the model. The structures from <code>LegalAidOutput</code> are incorporated here.</li>
<li><a href="https://github.com/grahamstark/ScottishTaxBenefitModel.jl/blob/master/src/RunSettings.jl">RunSettings</a> - fields were added to control optional switching of the capital source - this is discussed below.</li>
</ul>
<p>In addition, considerable development time was spent on the module <a href="https://github.com/grahamstark/ScottishTaxBenefitModel.jl/blob/master/src/LegalAidRunner.jl">LegalAidRunner.jl</a> which was intended to be a specialised high-speed driver module for legal aid calculations. This module was eventually abandoned because its memory requirements were too mich for the relatively underpowered laptop chosen to host the model.</p>
</section>
<section id="taxes-and-benefits" class="level3">
<h3 class="anchored" data-anchor-id="taxes-and-benefits">Taxes and Benefits</h3>
<p>The 2007 model was custom-written to specifically model Legal Aid. Instead of calculating liability to taxes and entitlements to benefits, it instead simply took recorded FRS values for these things and used those in its LA calculations. The current system is a general purpose tax-benefit model which makes it’s own estimates of household liabilities and entitlements given the rules of the fiscal system. We chose this approach chiefly because the benefit system, in particular, is changing rapidly, especially with the phased introduction of Universal Credit. To model Scotland with reasonable accuracy, you need to ‘pool’ multiple years of FRS data and, unless you override recorded benefit receipts with values calculated on the current regime, older data becomes unrepresentative. (The same is true of direct taxes though this is less relevant to Legal Aid Calculations).</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>There are two issues with benefits:</p>
<ul>
<li>we use modelled entitlements rather than recorded receipts. There are currently no official estimates of means-tested benefit takeup (it is deemed too complex because of the legacy/UC transition) but previous estimates were of the range 50-80% [^@],</li>
<li>the transition from Legacy Benefits [] to Universal Credit is progressing and this is hard to capture accurately. <a href="https://github.com/grahamstark/ScottishTaxBenefitModel.jl/blob/master/src/UCTransition.jl">Our modelling of this</a> is based on analysis by the House Of Commons Library<span class="citation" data-cites="house_of_commons_library_constituency_2020"><a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a></span>.</li>
</ul>
</div>
</div>
<p>Specification of the legal aid system came from the following documents: * <em> </em></p>
</section>
<section id="calibration" class="level3">
<h3 class="anchored" data-anchor-id="calibration">Calibration</h3>
</section>
<section id="testing" class="level3">
<h3 class="anchored" data-anchor-id="testing">Testing</h3>
<p>Core code is created test-first []. Material for the tests came mainly from the online Legal Aid Calculators [][]. The spreadsheet [][] contains the raw test cases, which were translated into the testsuite ``[]. The testsuite also contains a number of “dry runs” of the model.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The test suite is not as comprehensive as it should be. Quite a serious mistake in how capital is treated for passporting in AA slipped through unchecked until late in the development process. Mistakes in which benefits are disregarded also slipped though until late on.</p>
</div>
</div>
</section>
<section id="web-interface" class="level3">
<h3 class="anchored" data-anchor-id="web-interface">Web Interface</h3>
<p>The model has a web user interface. The code for this is in the LASim package. This is effectively the main package for the system, though legal aid simulations can actually be run directly from the <code>Scotben</code> package, or from any code that imports <code>ScotBen</code>.</p>
<p>The package uses the <a href="https://genieframework.com/">Genie</a> web framework. Genie provides much of the messy back-end needed for a web application, such as a simple web-server, the facility to start sessions for users and the like. Building on this, LASim is a single-page application which uses a large amount of hand-written Javascript to handle submissions and responses. Styling uses the <a href="https://getbootstrap.com/">Bootstrap</a> css framework, customised to use SLAB fonts and colours.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>There are several issues with the front-end:</p>
<ul>
<li>the front-end package needs rationalised. The package includes not only the actual front-end but two earlier abortive attempts at interfaces for the model. Only the <code>LASim</code> subfolder is actually needed;</li>
<li>the front-end is probably too big for a single page. It should either be broken up or aspects of inputs and outputs should be hidden by default</li>
<li>the interface code is hand-written and close to the limit of what can be maintained by hand-coding. A more automated system would be needed if many more options were added;</li>
<li>there are problems with the interface’s performance on the rather limited SLAB laptop supplied for running it;</li>
<li>the monitoring <code>progress bar</code> code was added last-minute and is somewhat unreliable.</li>
</ul>
</div>
</div>
</section>
<section id="frs-data" class="level3">
<h3 class="anchored" data-anchor-id="frs-data">FRS Data</h3>
<p>The model uses the Scottish households from pooled 2015-2021 Family Resources (FRS) data<span class="citation" data-cites="department_for_work_and_pensions_family_2024"><a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a></span>. We use the public use FRS release which has a number of fields deleted for privacy reasons, though the deletions often seem arbitrary.</p>
</section>
<section id="matching" class="level3">
<h3 class="anchored" data-anchor-id="matching">Matching</h3>
<p>The FRS is augmented with matched in data from the Scottish Household Survey<span class="citation" data-cites="scottish_government_scottish_2024-1"><a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a></span> and the Living Costs and Food Survey. SHS is mainly used to give local-level information and is not very relevant to Legal Aid. LCF is used to provide estimates for some of the expense fields - repayments, travel to work costs and work expenses. The matching code for thse dataset is <a href="https://github.com/grahamstark/ScottishTaxBenefitModel.jl/tree/master/matching">the matching/ folder</a>. Matching uses a custom version of Coarsened Exact Matching<span class="citation" data-cites="iacus_causal_2011 leulescu_statistical_2013 dorazio_statmatch_2022"><a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a></span></p>
<p>Both LCF and SHS are matched to FRS at the household level.</p>
<p>The SHS/FRS are matched on: * Tenure Type * Accomodation Type * Single Parent * Num Adults * Num Children * Employment Status of Head of Household (HoH) * Socio-Economic Status of HoH * Age of HoH * Ethnic Group Of HoH</p>
<p>LCF/FRS are matched on:</p>
<ul>
<li>Tenure Type</li>
<li>Accomodation Type</li>
<li>Number of Rooms</li>
<li>Age of Head</li>
<li>Num Children</li>
<li>Is self employed</li>
<li>Num children</li>
<li>Num adults</li>
<li>Ethnic Group (White/Non-White)</li>
<li>Age of HoH</li>
<li>Ethnic Group Of HoH</li>
</ul>
<p>The ‘top 20’ matches on these variables are then ranked by household income.</p>
<p>Code for this is in the <a href="https://github.com/grahamstark/ScottishTaxBenefitModel.jl/blob/master/src/MatchingLibs.jl">MatchingLibs.jl module</a></p>
<section id="capital" class="level4">
<h4 class="anchored" data-anchor-id="capital">Capital</h4>
<p><span class="citation" data-cites="office_for_national_statistics_wealth_2017"><a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a></span></p>
</section>
<section id="expenses" class="level4">
<h4 class="anchored" data-anchor-id="expenses">Expenses</h4>
<ul>
<li>Housing - for owner occupiers the FRS normally just counts mortgage interest as a cost. We add in capital repayments though this is tricky to derive from FRS variables. Code is in <code>xx</code> function in the <code>xxx</code> library.</li>
<li>Maintenance payments - ??</li>
<li>Debt repayments - use matched LCF data - COICOP code [XXX].</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Expense fields seem low. It is known that average expenses for maintenance contributions, debt repayments and work expenses are much lower on average in the FRS than in SLAB administrative data. This may simply be a selection problem but needs more investigation. Debt in particular could be reworked. Note that student loans are mostly paid through income tax and thus automatically deducted from the model’s income tax calculation.</p>
</div>
</div>
</section>
</section>
<section id="scottish-crime-and-justice-survey-scjs" class="level3">
<h3 class="anchored" data-anchor-id="scottish-crime-and-justice-survey-scjs">Scottish Crime and Justice Survey (SCJS)</h3>
<p>As an aside, the original proposal was to use SCJS<span class="citation" data-cites="scottish_government_scottish_crime_2024"><a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a></span> to model the likelihood of households experiencing a problem requiring legal advice. Some initial work was carried out which produced promising but this was abandoned on SLAB’s instructions. It could well be worth returning to this, perhaps as a stand-alone piece of work.</p>
</section>
<section id="slab-datasets" class="level3">
<h3 class="anchored" data-anchor-id="slab-datasets">SLAB Datasets</h3>
<p>Anonymised versions of the complete SLAB Civil and AA payments data for 2022/3 were supplied. These are the files XX and XX. These were used in the production of cost and caseload estimates. The procedure is crude, but the same as used in the 2007 study. The module <code>LegalAidData.jl</code> crosstabs the payment data by age group, sex/gender, case type, and entitlement level (passported/full entitlement/with contribition) and these are matched against crosstabs from the model by age/sex/estimated entitlement level to give estimates of the propensity of each entitlement group to claim legal aid. This is a crude procedure which at times produces questionable results such as the propensities for contributory benefit units sometimes being higher than for passported/fully entitled benefit units.</p>
</section>
<section id="updating-and-maintenance" class="level3">
<h3 class="anchored" data-anchor-id="updating-and-maintenance">Updating and Maintenance</h3>
</section>
<section id="todods" class="level3">
<h3 class="anchored" data-anchor-id="todods">TODODs</h3>
<div id="1af9bf0c" class="cell" data-execution_count="2">
<div class="cell-output cell-output-display" data-execution_count="33">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-3-output-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="references" class="level3">
<h3 class="anchored" data-anchor-id="references">References</h3>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-buck_means_2001" class="csl-entry" role="listitem">
Buck, Alexy, and Graham Stark. <span>“Means <span>Assessment</span>: <span>Options</span> for <span>Change</span>.”</span> Legal Services Commission, 2001. <a href="http://webarchive.nationalarchives.gov.uk/20100210214359/http://lsrc.org.uk/publications/meansassessmentoptionsforchange.pdf">http://webarchive.nationalarchives.gov.uk/20100210214359/http://lsrc.org.uk/publications/meansassessmentoptionsforchange.pdf</a>.
</div>
<div id="ref-buck_simplicity_2003" class="csl-entry" role="listitem">
———. <span>“Simplicity Versus Fairness in Means Testing: The Case of Civil Legal Aid.”</span> <em>Fiscal Studies</em> 24, no. 4 (December 2003): 427–49. <a href="http://onlinelibrary.wiley.com/doi/10.1111/j.1475-5890.2003.tb00090.x/abstract">http://onlinelibrary.wiley.com/doi/10.1111/j.1475-5890.2003.tb00090.x/abstract</a>.
</div>
<div id="ref-house_of_commons_library_constituency_2020" class="csl-entry" role="listitem">
Commons Library, House of. <span>“Constituency Data: <span>Universal</span> <span>Credit</span> Rollout,”</span> June 2020. <a href="https://commonslibrary.parliament.uk/social-policy/welfare-pensions/benefits/constituency-data-universal-credit-roll-out/">https://commonslibrary.parliament.uk/social-policy/welfare-pensions/benefits/constituency-data-universal-credit-roll-out/</a>.
</div>
<div id="ref-dorazio_statmatch_2022" class="csl-entry" role="listitem">
D’Orazio, Marcello. <span>“<span>StatMatch</span>: <span>Statistical</span> <span>Matching</span> or <span>Data</span> <span>Fusion</span>,”</span> March 2022. <a href="https://CRAN.R-project.org/package=StatMatch">https://CRAN.R-project.org/package=StatMatch</a>.
</div>
<div id="ref-digan_financial_2007" class="csl-entry" role="listitem">
Digan, Tony, and Graham Stark. <span>“Financial <span>Arrangements</span> for <span>Access</span> to <span>Civil</span> <span>Legal</span> <span>Aid</span>.”</span> Northern Ireland Legal Services Commission, 2007.
</div>
<div id="ref-scottish_government_scottish_crime_2024" class="csl-entry" role="listitem">
Government, Scottish. <span>“Scottish <span>Crime</span> and <span>Justice</span> <span>Survey</span> 2021/22,”</span> 2024. <a href="http://www.gov.scot/news/scottish-crime-justice-survey/">http://www.gov.scot/news/scottish-crime-justice-survey/</a>.
</div>
<div id="ref-scottish_government_scottish_2024-1" class="csl-entry" role="listitem">
Government, SCottish. <span>“Scottish <span>Household</span> <span>Survey</span>,”</span> 2024. <a href="http://www.gov.scot/collections/scottish-household-survey/">http://www.gov.scot/collections/scottish-household-survey/</a>.
</div>
<div id="ref-iacus_causal_2011" class="csl-entry" role="listitem">
Iacus, Stefano, Gary King, and Giuseppe Porro. <span>“Causal <span>Inference</span> <span>Without</span> <span>Balance</span> <span>Checking</span>: <span>Coarsened</span> <span>Exact</span> <span>Matching</span>.”</span> <em>Political Analysis</em>, 2011.
</div>
<div id="ref-leulescu_statistical_2013" class="csl-entry" role="listitem">
LEULESCU, Aura, and Mihaela AGAFIŢEI. <span>“Statistical Matching: A Model Based Approachfor Data Integration.”</span> Eurostat, 2013. <a href="https://ec.europa.eu/eurostat/documents/3888793/5855821/KS-RA-13-020-EN.PDF/477dd541-92ee-4259-95d4-1c42fcf2ef34?version=1.0">https://ec.europa.eu/eurostat/documents/3888793/5855821/KS-RA-13-020-EN.PDF/477dd541-92ee-4259-95d4-1c42fcf2ef34?version=1.0</a>.
</div>
<div id="ref-office_for_national_statistics_wealth_2017" class="csl-entry" role="listitem">
National Statistics, Office for. <span>“Wealth and Assets Survey (<span>WAS</span>),”</span> 2017. <a href="https://www.ons.gov.uk/economy/nationalaccounts/uksectoraccounts/methodologies/wealthandassetssurveywas">https://www.ons.gov.uk/economy/nationalaccounts/uksectoraccounts/methodologies/wealthandassetssurveywas</a>.
</div>
<div id="ref-StarkSLAB" class="csl-entry" role="listitem">
Stark, Graham. <span>“Scottish Legal Aid Borad,”</span> July 2013. <a href="https://github.com/grahamstark/scottish_legal_aid">https://github.com/grahamstark/scottish_legal_aid</a>.
</div>
<div id="ref-department_for_work_and_pensions_family_2024" class="csl-entry" role="listitem">
Work and Pensions, Department for. <span>“Family <span>Resources</span> <span>Survey</span> - <span>GOV</span>.<span>UK</span>,”</span> March 2024. <a href="https://www.gov.uk/government/collections/family-resources-survey--2">https://www.gov.uk/government/collections/family-resources-survey--2</a>.
</div>
</div>
</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p><a href="#ref-buck_means_2001" role="doc-biblioref"><span>“Means <span>Assessment</span>”</span></a>.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p><a href="#ref-buck_simplicity_2003" role="doc-biblioref"><span>“Simplicity Versus Fairness in Means Testing”</span></a>.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p><a href="#ref-digan_financial_2007" role="doc-biblioref">Digan and Stark, <span>“Financial <span>Arrangements</span> for <span>Access</span> to <span>Civil</span> <span>Legal</span> <span>Aid</span>”</span></a>; <a href="#ref-StarkSLAB" role="doc-biblioref">Stark, <span>“Scottish Legal Aid Borad”</span></a>.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p><a href="#ref-house_of_commons_library_constituency_2020" role="doc-biblioref">Commons Library, <span>“Constituency Data”</span></a>.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p><a href="#ref-department_for_work_and_pensions_family_2024" role="doc-biblioref">Work and Pensions, <span>“Family <span>Resources</span> <span>Survey</span> - <span>GOV</span>.<span>UK</span>”</span></a>.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p><a href="#ref-scottish_government_scottish_2024-1" role="doc-biblioref">Government, <span>“Scottish <span>Household</span> <span>Survey</span>”</span></a>.<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p><a href="#ref-iacus_causal_2011" role="doc-biblioref">Iacus, King, and Porro, <span>“Causal <span>Inference</span> <span>Without</span> <span>Balance</span> <span>Checking</span>”</span></a>; <a href="#ref-leulescu_statistical_2013" role="doc-biblioref">LEULESCU and AGAFIŢEI, <span>“Statistical Matching”</span></a>; <a href="#ref-dorazio_statmatch_2022" role="doc-biblioref">D’Orazio, <span>“<span>StatMatch</span>”</span></a>.<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p><a href="#ref-office_for_national_statistics_wealth_2017" role="doc-biblioref">National Statistics, <span>“Wealth and Assets Survey (<span>WAS</span>)”</span></a>.<a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn9"><p><a href="#ref-scottish_government_scottish_crime_2024" role="doc-biblioref">Government, <span>“Scottish <span>Crime</span> and <span>Justice</span> <span>Survey</span> 2021/22”</span></a>.<a href="#fnref9" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{stark2024,
  author = {Stark, Graham},
  title = {SLAB {Legal} {Aid} {Model} {Documentation}},
  date = {2024-05-20},
  url = {https://virtual-worlds.scot/techdoc/index.html},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-stark2024" class="csl-entry quarto-appendix-citeas" role="listitem">
Stark, Graham. <span>“SLAB Legal Aid Model Documentation,”</span> May
20, 2024. <a href="https://virtual-worlds.scot/techdoc/index.html">https://virtual-worlds.scot/techdoc/index.html</a>.
</div></div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>